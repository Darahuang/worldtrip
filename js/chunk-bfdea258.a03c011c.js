(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfdea258"],{"653d":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:"table-responsive my-5"},r={class:"table table-hover"},l=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{class:"d-none d-sm-table-cell"},"購買時間"),Object(n["createElementVNode"])("th",{class:"d-none d-sm-table-cell"},"Email"),Object(n["createElementVNode"])("th",null,"購買品項"),Object(n["createElementVNode"])("th",null,"應付金額"),Object(n["createElementVNode"])("th",{class:"d-none d-sm-table-cell"},"是否付款"),Object(n["createElementVNode"])("th",null,"編輯")])],-1),o={class:"d-none d-sm-table-cell"},d={class:"d-none d-sm-table-cell"},i={class:"list-unstyled mb-0"},s={class:"d-none d-sm-table-cell"},b={class:"form-check form-switch"},u=["id","onUpdate:modelValue","onChange"],m=["for"],O={class:"btn-group btn-group-sm"},p=["onClick"],j=["onClick"];function h(e,t,c,h,E,g){var V=Object(n["resolveComponent"])("Loading"),N=Object(n["resolveComponent"])("Pagination"),f=Object(n["resolveComponent"])("OrderModal"),k=Object(n["resolveComponent"])("DelModal");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(V,{isLoading:e.isLoading},null,8,["isLoading"]),Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("table",r,[l,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.orders,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id,class:Object(n["normalizeClass"])({"text-muted":!t.is_paid})},[Object(n["createElementVNode"])("td",o,Object(n["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(n["createElementVNode"])("td",d,Object(n["toDisplayString"])(t.user.email),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("ul",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.products,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.id,class:"mb-1"},Object(n["toDisplayString"])(e.product.title)+" 人數: "+Object(n["toDisplayString"])(e.qty)+" "+Object(n["toDisplayString"])(e.product.unit),1)})),128))])]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.$filters.dollarSignThousandth(t.total)),1),Object(n["createElementVNode"])("td",s,[Object(n["createElementVNode"])("div",b,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",role:"switch",id:t.id,"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return h.updateOrder(t)}},null,40,u),[[n["vModelCheckbox"],t.is_paid]]),Object(n["createElementVNode"])("label",{class:"form-check-label",for:t.id},Object(n["toDisplayString"])(t.is_paid?"已付款":"未付款"),9,m)])]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(e){return h.openModal("check",t)}}," 檢視 ",8,p),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return h.openModal("delete",t)}}," 刪除 ",8,j)])])],2)})),128))])]),Object(n["createVNode"])(N,{pages:e.pagination,onEmitPage:h.getOrders},null,8,["pages","onEmitPage"]),Object(n["createVNode"])(f,{order:e.tempOrder,onEmitChange:h.updateOrder,ref:"orderModal"},null,8,["order","onEmitChange"]),Object(n["createVNode"])(k,{item:e.tempOrder,onEmitDelete:h.deleteOrder,ref:"delModal"},null,8,["item","onEmitDelete"])])],64)}var E=c("5530"),g=c("1da1"),V=(c("96cf"),c("99af"),c("1799")),N=(c("b0c0"),{class:"modal fade",tabindex:"-1","aria-hidden":"true",ref:"modal"}),f={class:"modal-dialog modal-xl"},k={class:"modal-content"},y={class:"modal-header bg-primary"},v=Object(n["createElementVNode"])("h5",{class:"modal-title text-white"},"訂單細節",-1),x={class:"modal-body"},w={class:"row"},B={class:"col-sm-5"},M=Object(n["createElementVNode"])("h3",null,"用戶資料",-1),D={class:"table"},S={key:0},C=Object(n["createElementVNode"])("th",{style:{width:"80px"}},"姓名",-1),L=Object(n["createElementVNode"])("th",null,"Email",-1),_=Object(n["createElementVNode"])("th",null,"電話",-1),P=Object(n["createElementVNode"])("th",null,"地址",-1),R={class:"col-sm-7"},F=Object(n["createElementVNode"])("h3",null,"訂單細節",-1),$={class:"table"},T={key:0},U=Object(n["createElementVNode"])("th",{style:{width:"80px"}},"訂單編號",-1),q=Object(n["createElementVNode"])("th",null,"下單時間",-1),J=Object(n["createElementVNode"])("th",null,"付款時間",-1),z=Object(n["createElementVNode"])("th",null,"付款狀態",-1),I={key:0,class:"text-success"},X={key:1,class:"text-muted"},A=Object(n["createElementVNode"])("h3",null,"選購商品",-1),G={class:"table"},H={key:0},K={class:"text-end"},Q={class:"form-check float-end"},W={for:"payment",class:"form-check-label"},Y={class:"modal-footer"};function Z(e,t,c,a,r,l){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",N,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",y,[v,Object(n["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return a.hideModal&&a.hideModal.apply(a,arguments)}),"aria-label":"Close"})]),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("div",B,[M,Object(n["createElementVNode"])("table",D,[e.tempOrder.user?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tbody",S,[Object(n["createElementVNode"])("tr",null,[C,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.tempOrder.user.name),1)]),Object(n["createElementVNode"])("tr",null,[L,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.tempOrder.user.email),1)]),Object(n["createElementVNode"])("tr",null,[_,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.tempOrder.user.tel),1)]),Object(n["createElementVNode"])("tr",null,[P,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.tempOrder.user.address),1)])])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",R,[F,Object(n["createElementVNode"])("table",$,[e.tempOrder?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tbody",T,[Object(n["createElementVNode"])("tr",null,[U,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.tempOrder.id),1)]),Object(n["createElementVNode"])("tr",null,[q,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.$filters.date(e.tempOrder.create_at)),1)]),Object(n["createElementVNode"])("tr",null,[J,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.$filters.date(e.tempOrder.paid_date)),1)]),Object(n["createElementVNode"])("tr",null,[z,Object(n["createElementVNode"])("td",null,[e.tempOrder.is_paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",I,"以付款")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",X,"未付款"))])])])):Object(n["createCommentVNode"])("",!0)]),A,Object(n["createElementVNode"])("table",G,[e.tempOrder?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tbody",H,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.tempOrder.products,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.qty)+"/"+Object(n["toDisplayString"])(t.product.unit),1),Object(n["createElementVNode"])("td",K,Object(n["toDisplayString"])(e.$filters.dollarSignThousandth(t.total)),1)])})),128))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Q,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"checkbox",class:"form-check-input",value:"",id:"payment","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tempOrder.is_paid=t})},null,512),[[n["vModelCheckbox"],e.tempOrder.is_paid]]),Object(n["createElementVNode"])("label",W,Object(n["toDisplayString"])(e.tempOrder.is_paid?"已付款":"未付款"),1)])])])]),Object(n["createElementVNode"])("div",Y,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=function(){return a.hideModal&&a.hideModal.apply(a,arguments)})},"取消"),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(t){return a.emitChange(e.tempOrder)})},"修改付款狀態 ")])])])],512)}var ee=c("53cb"),te={props:{order:{type:Object,default:function(){return{}}}},emits:["emit-change"],setup:function(e,t){var c=Object(n["reactive"])({tempOrder:{}}),a=Object(ee["a"])(),r=a.modal,l=a.modalBox,o=a.showModal,d=a.hideModal;function i(e){t.emit("emit-change",e)}Object(n["watch"])((function(){return e.order}),(function(){c.tempOrder=Object(E["a"])({},e.order)}));var s=Object(n["toRefs"])(c);return Object(E["a"])(Object(E["a"])({modal:r,modalBox:l,showModal:o,hideModal:d},s),{},{emitChange:i})}},ce=c("6b0d"),ne=c.n(ce);const ae=ne()(te,[["render",Z]]);var re=ae,le=c("6ff1"),oe=c("3a5e"),de={components:{Loading:oe["a"],Pagination:V["a"],OrderModal:re,DelModal:le["a"]},setup:function(){var e=Object(n["inject"])("Message"),t=Object(n["inject"])("axios"),c=Object(n["reactive"])({orders:[],pagination:{},tempOrder:{},isLoading:!1,currentPage:1}),a=Object(n["ref"])(null),r=Object(n["ref"])(null);function l(){return o.apply(this,arguments)}function o(){return o=Object(g["a"])(regeneratorRuntime.mark((function n(){var a,r,l,o=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:1,c.currentPage=a,r="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/admin/orders?page=").concat(c.currentPage),c.isLoading=!0,n.prev=4,n.next=7,t.get(r);case 7:l=n.sent,l.data.success?(c.orders=l.data.orders,c.pagination=l.data.pagination,e("success","訂單取得成功")):e("error","".concat(l.data.message)),c.isLoading=!1,n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](4),e("error","無法取得產品，請再次確認!"),c.isLoading=!1;case 16:case"end":return n.stop()}}),n,null,[[4,12]])}))),o.apply(this,arguments)}function d(e,t){"check"===e?(c.tempOrder=Object(E["a"])({},t),a.value.showModal()):"delete"===e&&(c.tempOrder=Object(E["a"])({},t),r.value.showModal())}function i(e){return s.apply(this,arguments)}function s(){return s=Object(g["a"])(regeneratorRuntime.mark((function n(r){var o,d,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/admin/order/").concat(r.id),d={is_paid:r.is_paid},c.isLoading=!0,n.prev=3,n.next=6,t.put(o,{data:d});case 6:i=n.sent,i.data.success?(l(c.currentPage),e("success","".concat(i.data.message)),a.value.hideModal()):e("error","".concat(i.data.message)),c.isLoading=!1,n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](3),e("error","無法修改訂單，請再次確認!"),c.isLoading=!1;case 15:case"end":return n.stop()}}),n,null,[[3,11]])}))),s.apply(this,arguments)}function b(e){return u.apply(this,arguments)}function u(){return u=Object(g["a"])(regeneratorRuntime.mark((function n(r){var o,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/admin/order/").concat(r),n.prev=1,n.next=4,t.delete(o);case 4:d=n.sent,c.isLoading=!0,d.data.success?(l(c.currentPage),e("success","訂單刪除成功"),a.value.hideModal()):e("error","".concat(d.data.message)),c.isLoading=!1,n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),e("error","無法修改訂單，請再次確認!"),c.isLoading=!1;case 14:case"end":return n.stop()}}),n,null,[[1,10]])}))),u.apply(this,arguments)}l();var m=Object(n["toRefs"])(c);return Object(E["a"])(Object(E["a"])({},m),{},{orderModal:a,openModal:d,updateOrder:i,delModal:r,deleteOrder:b,getOrders:l})}};const ie=ne()(de,[["render",h]]);t["default"]=ie},b0c0:function(e,t,c){var n=c("83ab"),a=c("5e77").EXISTS,r=c("e330"),l=c("9bf2").f,o=Function.prototype,d=r(o.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=r(i.exec),b="name";n&&!a&&l(o,b,{configurable:!0,get:function(){try{return s(i,d(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-bfdea258.a03c011c.js.map