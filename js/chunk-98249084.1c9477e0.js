(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98249084"],{"009a":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a={key:0,class:"container my-5"},r={class:"row justify-content-center"},o={class:"col-lg-10"},s={class:"row"},l={class:"col-lg-8 mb-3 mb-lg-0"},i=["src"],d={class:"flex-grow-1 ms-3 d-flex justify-content-between"},u={class:"h5"},b={class:"input-group input-group-sm my-3"},p=["disabled","onClick"],m=Object(c["createElementVNode"])("span",{class:"material-icons-outlined align-middle"}," remove ",-1),j=[m],O=["onUpdate:modelValue","onChange"],f=["onClick"],g=Object(c["createElementVNode"])("span",{class:"material-icons-outlined align-middle"}," add ",-1),h=[g],v={class:"text-end ms-3"},V=["onClick"],y=Object(c["createElementVNode"])("span",{class:"material-icons"},"delete_forever",-1),E=[y],N={class:"mt-5 h6"},k={class:"col-lg-4"},x={class:"card rounded-0"},w=Object(c["createElementVNode"])("div",{class:"card-header"},"訂單資訊",-1),C={class:"card-body"},B={class:"d-flex justify-content-between"},L=Object(c["createElementVNode"])("p",null,"行程總額:",-1),S={key:0},T={class:"input-group"},_={class:"text-primary my-3"},R=Object(c["createElementVNode"])("span",{class:"material-icons-outlined align-text-bottom"}," star ",-1),D={key:0},q={key:1},M=Object(c["createTextVNode"])("輸入"),$=Object(c["createElementVNode"])("span",{class:"text-danger"},"anniversary",-1),z=Object(c["createTextVNode"])("可享95折優惠"),A=[M,$,z],G={class:"d-flex justify-content-between border-bottom"},P=Object(c["createElementVNode"])("p",null,"折扣金額:",-1),U={key:0},F={class:"d-flex justify-content-between mt-3"},J=Object(c["createElementVNode"])("p",{class:"card-text"},"應付金額:",-1),I={key:0,class:"h5 text-primary fw-bold"},X=Object(c["createTextVNode"])("前往結帳 "),Y={key:1,class:"container"},H={class:"d-flex flex-column align-items-center justify-content-center vh-100"},K=Object(c["createElementVNode"])("div",{class:"cart-bg bg-size-cover bg-repeat-no-repeat"},null,-1),Q=Object(c["createElementVNode"])("p",{class:"fw-bold h4 text-center mb-4"},[Object(c["createTextVNode"])(" 購物車目前沒有商品，"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" 立刻挑選喜愛的行程吧！ ")],-1),W=Object(c["createTextVNode"])("挑選行程");function Z(e,t,n,m,g,y){var M=Object(c["resolveComponent"])("Loading"),$=Object(c["resolveComponent"])("ProgressBar"),z=Object(c["resolveComponent"])("routerLink"),Z=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(M,{isLoading:e.isLoading},null,8,["isLoading"]),0!==e.carts.total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("section",a,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",o,[Object(c["createVNode"])($,{done:e.done},null,8,["done"]),Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("a",{href:"#",class:"d-block text-end text-decoration-none mb-3 link-dark link-hover",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(){return m.deleteAll&&m.deleteAll.apply(m,arguments)}),["prevent"]))}," 清空購物清單 "),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.carts.carts,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"d-flex border p-3 mb-3",key:t.id},[Object(c["createElementVNode"])("img",{src:t.product.imageUrl,alt:"產品圖片",class:"d-none d-sm-block cart-img object-fit-cover object-position-center"},null,8,i),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h3",u,Object(c["toDisplayString"])(t.product.title),1),Object(c["createElementVNode"])("small",null,Object(c["toDisplayString"])(e.$filters.dollarSignThousandth(t.product.price)),1),Object(c["createElementVNode"])("small",null," * "+Object(c["toDisplayString"])(t.qty)+Object(c["toDisplayString"])(t.product.unit),1),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",disabled:t.qty<=1,onClick:function(e){return m.updateCart(t,t.qty-1)}},j,8,p),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control text-center bg-transparent",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return m.updateCart(t,t.qty)}},null,40,O),[[c["vModelText"],t.qty,void 0,{number:!0}]]),Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:function(e){return m.updateCart(t,t.qty+1)}},h,8,f)])]),Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("a",{href:"#",class:"text-danger",onClick:Object(c["withModifiers"])((function(e){return m.deleteCart(t.id)}),["prevent"])},E,8,V),Object(c["createElementVNode"])("p",N,Object(c["toDisplayString"])(e.$filters.dollarSignThousandth(t.final_total)),1)])])])})),128))]),Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",x,[w,Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("div",B,[L,e.carts.carts?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",S,Object(c["toDisplayString"])(e.$filters.dollarSignThousandth(e.carts.final_total)),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",T,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.coupon=t}),class:"form-control",placeholder:"請輸入優惠碼"},null,512),[[c["vModelText"],e.coupon]]),Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[2]||(t[2]=function(){return m.addCouponCode&&m.addCouponCode.apply(m,arguments)})}," 套用優惠碼 ")]),Object(c["createElementVNode"])("div",_,[R,e.carts.total!==e.carts.final_total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",D,"已套用優惠券")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",q,A))]),Object(c["createElementVNode"])("div",G,[P,e.carts.final_total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",U,Object(c["toDisplayString"])(e.$filters.dollarSignThousandth(e.carts.total-e.carts.final_total)),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",F,[J,e.carts.final_total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",I,Object(c["toDisplayString"])(e.$filters.dollarSignThousandth(e.carts.final_total)),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createVNode"])(z,{to:"/checkout",class:"btn btn-slide-right border-0 rounded-0"},{default:Object(c["withCtx"])((function(){return[X]})),_:1})])])])])])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("section",Y,[Object(c["createElementVNode"])("div",H,[K,Q,Object(c["createVNode"])(Z,{to:"/products",class:"btn btn-slide-right border-0 px-5 py-2"},{default:Object(c["withCtx"])((function(){return[W]})),_:1})])]))],64)}var ee=n("5530"),te=n("1da1"),ne=(n("96cf"),n("b0c0"),n("99af"),n("3a5e")),ce=n("b6b4"),ae=n("cfb9"),re=n("6c02"),oe=n("1915"),se={components:{Loading:ne["a"],ProgressBar:ce["a"]},setup:function(){var e=Object(c["inject"])("Message"),t=Object(c["inject"])("axios"),n=Object(re["d"])(),a=Object(c["reactive"])({isLoading:!1,carts:{},done:n.name,coupon:""});function r(){return o.apply(this,arguments)}function o(){return o=Object(te["a"])(regeneratorRuntime.mark((function n(){var c,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart"),a.isLoading=!0,n.prev=2,n.next=5,t.get(c);case 5:r=n.sent,r.data.success?a.carts=r.data.data:e("error","無法取得購物車內容，請再次確認!"),Object(oe["a"])(),a.isLoading=!1,n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](2),e("error","無法取得購物車內容，請再次確認!"),a.isLoading=!1;case 15:case"end":return n.stop()}}),n,null,[[2,11]])}))),o.apply(this,arguments)}function s(e,t){return l.apply(this,arguments)}function l(){return l=Object(te["a"])(regeneratorRuntime.mark((function n(c,o){var s,l,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(o<=0)){n.next=3;break}return e("warning","人數至少1位"),n.abrupt("return");case 3:return s="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart/").concat(c.id),l={product_id:c.product_id,qty:o},a.isLoading=!0,n.prev=6,n.next=9,t.put(s,{data:l});case 9:i=n.sent,i.data.success?(r(),e("success","".concat(i.data.message))):e("error","".concat(i.data.message)),a.isLoading=!1,n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](6),e("error","無法報名，請再次確認!"),a.isLoading=!1;case 18:case"end":return n.stop()}}),n,null,[[6,14]])}))),l.apply(this,arguments)}function i(e){return d.apply(this,arguments)}function d(){return d=Object(te["a"])(regeneratorRuntime.mark((function n(c){var o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart/").concat(c),a.isLoading=!0,n.prev=2,n.next=5,t.delete(o);case 5:s=n.sent,s.data.success&&(ae["a"].emit("emit-carts"),r(),e("success","".concat(s.data.message))),a.isLoading=!1,n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](2),e("error","無法清除購物清單，請再次確認!"),a.isLoading=!1;case 14:case"end":return n.stop()}}),n,null,[[2,10]])}))),d.apply(this,arguments)}function u(){return b.apply(this,arguments)}function b(){return b=Object(te["a"])(regeneratorRuntime.mark((function n(){var c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/carts"),a.isLoading=!0,n.prev=2,n.next=5,t.delete(c);case 5:o=n.sent,o.data.success?(ae["a"].emit("emit-carts"),r(),e("success","".concat(o.data.message))):e("error","".concat(o.data.message)),a.isLoading=!1,n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](2),e("error","無法清除購物清單，請再次確認!"),a.isLoading=!1;case 14:case"end":return n.stop()}}),n,null,[[2,10]])}))),b.apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return m=Object(te["a"])(regeneratorRuntime.mark((function n(){var c,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/coupon"),a.isLoading=!0,o={code:a.coupon},n.prev=3,n.next=6,t.post(c,{data:o});case 6:s=n.sent,s.data.success?(r(),e("success","".concat(s.data.message))):e("error","".concat(s.data.message)),a.isLoading=!1,n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](3),e("error","無法使用優惠券，請再次確認!"),a.isLoading=!1;case 15:case"end":return n.stop()}}),n,null,[[3,11]])}))),m.apply(this,arguments)}r();var j=Object(c["toRefs"])(a);return Object(ee["a"])(Object(ee["a"])({},j),{},{getCarts:r,updateCart:s,deleteCart:i,deleteAll:u,addCouponCode:p})}},le=n("6b0d"),ie=n.n(le);const de=ie()(se,[["render",Z]]);t["default"]=de},1915:function(e,t,n){"use strict";function c(){window.pageYOffset>100&&window.scrollTo({top:0,behavior:"smooth"})}n.d(t,"a",(function(){return c}))},"3a5e":function(e,t,n){"use strict";var c=n("7a23"),a=Object(c["createElementVNode"])("div",{class:"bubblingG"},[Object(c["createElementVNode"])("span",{id:"bubblingG_1"}),Object(c["createElementVNode"])("span",{id:"bubblingG_2"}),Object(c["createElementVNode"])("span",{id:"bubblingG_3"})],-1);function r(e,t,n,r,o,s){var l=Object(c["resolveComponent"])("Loading",!0);return Object(c["openBlock"])(),Object(c["createBlock"])(l,{active:n.isLoading},{default:Object(c["withCtx"])((function(){return[a]})),_:1},8,["active"])}var o={props:{isLoading:{type:Boolean,default:!1}}},s=n("6b0d"),l=n.n(s);const i=l()(o,[["render",r]]);t["a"]=i},"99af":function(e,t,n){"use strict";var c=n("23e7"),a=n("da84"),r=n("d039"),o=n("e8b5"),s=n("861d"),l=n("7b0b"),i=n("07fa"),d=n("8418"),u=n("65f0"),b=n("1dde"),p=n("b622"),m=n("2d00"),j=p("isConcatSpreadable"),O=9007199254740991,f="Maximum allowed index exceeded",g=a.TypeError,h=m>=51||!r((function(){var e=[];return e[j]=!1,e.concat()[0]!==e})),v=b("concat"),V=function(e){if(!s(e))return!1;var t=e[j];return void 0!==t?!!t:o(e)},y=!h||!v;c({target:"Array",proto:!0,forced:y},{concat:function(e){var t,n,c,a,r,o=l(this),s=u(o,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(r=-1===t?o:arguments[t],V(r)){if(a=i(r),b+a>O)throw g(f);for(n=0;n<a;n++,b++)n in r&&d(s,b,r[n])}else{if(b>=O)throw g(f);d(s,b++,r)}return s.length=b,s}})},b0c0:function(e,t,n){var c=n("83ab"),a=n("5e77").EXISTS,r=n("e330"),o=n("9bf2").f,s=Function.prototype,l=r(s.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=r(i.exec),u="name";c&&!a&&o(s,u,{configurable:!0,get:function(){try{return d(i,l(this))[1]}catch(e){return""}}})},b6b4:function(e,t,n){"use strict";var c=n("7a23"),a={class:"container mb-5"},r={class:"list-unstyled row"},o=Object(c["createElementVNode"])("p",{class:"fs-7"},"確認購物車",-1),s=[o],l=Object(c["createElementVNode"])("p",{class:"fs-7"},"填寫資料",-1),i=[l],d=Object(c["createElementVNode"])("p",{class:"fs-7"},"確認訂單",-1),u=[d];function b(e,t,n,o,l,d){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("ul",r,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["progressBar-step progressBar-icon1 col-4",{"progressBar-done":"Carts"===n.done||o.step2||o.step3}])},s,2),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["progressBar-step progressBar-icon2 col-4",{"progressBar-done":"Checkout"===n.done||o.step3}])},i,2),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["progressBar-step progressBar-icon3 col-4",{"progressBar-done":"Payment"===n.done}])},u,2)])])}var p={props:{done:{type:String}},setup:function(e){var t=Object(c["computed"])((function(){return"Checkout"===e.done})),n=Object(c["computed"])((function(){return"Payment"===e.done}));return{step2:t,step3:n}}},m=n("6b0d"),j=n.n(m);const O=j()(p,[["render",b]]);t["a"]=O},cfb9:function(e,t,n){"use strict";var c=function(e){return{all:e=e||new Map,on:function(t,n){var c=e.get(t);c?c.push(n):e.set(t,[n])},off:function(t,n){var c=e.get(t);c&&(n?c.splice(c.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var c=e.get(t);c&&c.slice().map((function(e){e(n)})),(c=e.get("*"))&&c.slice().map((function(e){e(t,n)}))}}},a=c();t["a"]=a}}]);
//# sourceMappingURL=chunk-98249084.1c9477e0.js.map