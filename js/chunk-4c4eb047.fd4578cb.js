(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c4eb047"],{"00b4":function(e,t,a){"use strict";a("ac1f");var n=a("23e7"),r=a("da84"),c=a("c65b"),o=a("e330"),l=a("1626"),s=a("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=r.Error,u=o(/./.test);n({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!l(t))return u(this,e);var a=c(t,this,e);if(null!==a&&!s(a))throw new d("RegExp exec method returned something other than an Object or null");return!!a}})},"107c":function(e,t,a){var n=a("d039"),r=a("da84"),c=r.RegExp;e.exports=n((function(){var e=c("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1915:function(e,t,a){"use strict";function n(){window.pageYOffset>100&&window.scrollTo({top:0,behavior:"smooth"})}a.d(t,"a",(function(){return n}))},"3a5e":function(e,t,a){"use strict";var n=a("7a23"),r=Object(n["createElementVNode"])("div",{class:"bubblingG"},[Object(n["createElementVNode"])("span",{id:"bubblingG_1"}),Object(n["createElementVNode"])("span",{id:"bubblingG_2"}),Object(n["createElementVNode"])("span",{id:"bubblingG_3"})],-1);function c(e,t,a,c,o,l){var s=Object(n["resolveComponent"])("Loading",!0);return Object(n["openBlock"])(),Object(n["createBlock"])(s,{active:a.isLoading},{default:Object(n["withCtx"])((function(){return[r]})),_:1},8,["active"])}var o={props:{isLoading:{type:Boolean,default:!1}}},l=a("6b0d"),s=a.n(l);const i=s()(o,[["render",c]]);t["a"]=i},9263:function(e,t,a){"use strict";var n=a("c65b"),r=a("e330"),c=a("577e"),o=a("ad6d"),l=a("9f7f"),s=a("5692"),i=a("7c73"),d=a("69f3").get,u=a("fce3"),m=a("107c"),b=s("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,f=p,O=r("".charAt),j=r("".indexOf),g=r("".replace),v=r("".slice),V=function(){var e=/a/,t=/b*/g;return n(p,e,"a"),n(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),E=l.BROKEN_CARET,x=void 0!==/()??/.exec("")[1],h=V||x||E||u||m;h&&(f=function(e){var t,a,r,l,s,u,m,h=this,N=d(h),y=c(e),w=N.raw;if(w)return w.lastIndex=h.lastIndex,t=n(f,w,y),h.lastIndex=w.lastIndex,t;var k=N.groups,B=E&&h.sticky,C=n(o,h),S=h.source,I=0,R=y;if(B&&(C=g(C,"y",""),-1===j(C,"g")&&(C+="g"),R=v(y,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==O(y,h.lastIndex-1))&&(S="(?: "+S+")",R=" "+R,I++),a=new RegExp("^(?:"+S+")",C)),x&&(a=new RegExp("^"+S+"$(?!\\s)",C)),V&&(r=h.lastIndex),l=n(p,B?a:h,R),B?l?(l.input=v(l.input,I),l[0]=v(l[0],I),l.index=h.lastIndex,h.lastIndex+=l[0].length):h.lastIndex=0:V&&l&&(h.lastIndex=h.global?l.index+l[0].length:r),x&&l&&l.length>1&&n(b,l[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(l[s]=void 0)})),l&&k)for(l.groups=u=i(null),s=0;s<k.length;s++)m=k[s],u[m[0]]=l[m[1]];return l}),e.exports=f},"99af":function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),c=a("d039"),o=a("e8b5"),l=a("861d"),s=a("7b0b"),i=a("07fa"),d=a("8418"),u=a("65f0"),m=a("1dde"),b=a("b622"),p=a("2d00"),f=b("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",g=r.TypeError,v=p>=51||!c((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),V=m("concat"),E=function(e){if(!l(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)},x=!v||!V;n({target:"Array",proto:!0,forced:x},{concat:function(e){var t,a,n,r,c,o=s(this),l=u(o,0),m=0;for(t=-1,n=arguments.length;t<n;t++)if(c=-1===t?o:arguments[t],E(c)){if(r=i(c),m+r>O)throw g(j);for(a=0;a<r;a++,m++)a in c&&d(l,m,c[a])}else{if(m>=O)throw g(j);d(l,m++,c)}return l.length=m,l}})},"9f7f":function(e,t,a){var n=a("d039"),r=a("da84"),c=r.RegExp,o=n((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),l=o||n((function(){return!c("a","y").sticky})),s=o||n((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:l,UNSUPPORTED_Y:o}},ac1f:function(e,t,a){"use strict";var n=a("23e7"),r=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,a){"use strict";var n=a("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,a){var n=a("83ab"),r=a("5e77").EXISTS,c=a("e330"),o=a("9bf2").f,l=Function.prototype,s=c(l.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=c(i.exec),u="name";n&&!r&&o(l,u,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},b6b4:function(e,t,a){"use strict";var n=a("7a23"),r={class:"container mb-5"},c={class:"list-unstyled row"},o=Object(n["createElementVNode"])("p",{class:"fs-7"},"確認購物車",-1),l=[o],s=Object(n["createElementVNode"])("p",{class:"fs-7"},"填寫資料",-1),i=[s],d=Object(n["createElementVNode"])("p",{class:"fs-7"},"確認訂單",-1),u=[d];function m(e,t,a,o,s,d){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("ul",c,[Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["progressBar-step progressBar-icon1 col-4",{"progressBar-done":"Carts"===a.done||o.step2||o.step3}])},l,2),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["progressBar-step progressBar-icon2 col-4",{"progressBar-done":"Checkout"===a.done||o.step3}])},i,2),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["progressBar-step progressBar-icon3 col-4",{"progressBar-done":"Payment"===a.done}])},u,2)])])}var b={props:{done:{type:String}},setup:function(e){var t=Object(n["computed"])((function(){return"Checkout"===e.done})),a=Object(n["computed"])((function(){return"Payment"===e.done}));return{step2:t,step3:a}}},p=a("6b0d"),f=a.n(p);const O=f()(b,[["render",m]]);t["a"]=O},b7c8:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r={class:"container my-5"},c={class:"row justify-content-center"},o={class:"col-lg-10"},l={class:"row flex-row-reverse"},s={class:"col-lg-4 mb-3 mb-lg-0"},i={class:"bg-primary-light"},d=["src"],u={class:"ms-3"},m={class:"h5"},b={class:"p-3"},p={class:"d-flex justify-content-between border-top pt-3"},f=Object(n["createElementVNode"])("p",{class:"h6"},"應付金額:",-1),O={key:0,class:"h5 text-primary fw-bold"},j={class:"col-lg-8"},g=Object(n["createElementVNode"])("span",{class:"text-danger"},"*為必填欄位",-1),v={class:"row mt-3"},V={class:"col-md-6 mb-3"},E=Object(n["createElementVNode"])("label",{for:"name",class:"form-label"},"聯絡人姓名",-1),x=Object(n["createElementVNode"])("span",{class:"text-danger"},"*",-1),h={class:"col-md-6 mb-3"},N=Object(n["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),y=Object(n["createElementVNode"])("span",{class:"text-danger"},"*",-1),w={class:"col-md-6 mb-3"},k=Object(n["createElementVNode"])("label",{for:"tel",class:"form-label"},"電話",-1),B=Object(n["createElementVNode"])("span",{class:"text-danger"},"*",-1),C={class:"col-md-6 mb-3"},S=Object(n["createElementVNode"])("label",{for:"payment",class:"form-label"},"付款方式",-1),I=Object(n["createElementVNode"])("span",{class:"text-danger"},"*",-1),R=Object(n["createElementVNode"])("option",{value:"",disabled:""},"請選擇付款方式",-1),L=["value"],_={class:"col-12 mb-3"},T=Object(n["createElementVNode"])("label",{for:"address",class:"form-label"},"聯絡人地址",-1),P=Object(n["createElementVNode"])("span",{class:"text-danger"},"*",-1),A={class:"col-12 mt-3"},D={class:"form-floating"},U=Object(n["createElementVNode"])("label",{for:"message"},"請輸入您的備註",-1),z={class:"d-flex justify-content-between mt-3"},M=Object(n["createTextVNode"])("回到上一頁"),F=["disabled"];function $(e,t,a,$,q,G){var K=Object(n["resolveComponent"])("Loading"),Y=Object(n["resolveComponent"])("ProgressBar"),J=Object(n["resolveComponent"])("Field"),W=Object(n["resolveComponent"])("ErrorMessage"),X=Object(n["resolveComponent"])("router-link"),H=Object(n["resolveComponent"])("Form");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(K,{isLoading:e.isLoading},null,8,["isLoading"]),Object(n["createElementVNode"])("section",r,[Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",o,[Object(n["createVNode"])(Y,{done:e.done},null,8,["done"]),Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.carts.carts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"d-flex p-3",key:t.id},[Object(n["createElementVNode"])("img",{src:t.product.imageUrl,class:"cart-img object-fit-cover object-position-center",alt:""},null,8,d),Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("h3",m,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("small",null,Object(n["toDisplayString"])(e.$filters.dollarSignThousandth(t.product.price)),1),Object(n["createElementVNode"])("small",null," * "+Object(n["toDisplayString"])(t.qty)+Object(n["toDisplayString"])(t.product.unit),1)])])})),128)),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",p,[f,e.carts.final_total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",O,Object(n["toDisplayString"])(e.$filters.dollarSignThousandth(e.carts.final_total)),1)):Object(n["createCommentVNode"])("",!0)])])])]),Object(n["createElementVNode"])("div",j,[g,Object(n["createVNode"])(H,{onSubmit:$.createOrder},{default:Object(n["withCtx"])((function(a){var r=a.errors,c=a.meta;return[Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("div",V,[E,x,Object(n["createVNode"])(J,{type:"text",class:Object(n["normalizeClass"])(["form-control form-input-bg",{"is-invalid":r["姓名"]}]),id:"name",placeholder:"請輸入姓名",name:"姓名",rules:"required",modelValue:e.form.user.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.user.name=t})},null,8,["class","modelValue"]),Object(n["createVNode"])(W,{name:"姓名",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",h,[N,y,Object(n["createVNode"])(J,{type:"email",class:Object(n["normalizeClass"])(["form-control form-input-bg",{"is-invalid":r["Email"]}]),id:"email",placeholder:"請輸入Email",name:"Email",rules:"email||required",modelValue:e.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.user.email=t})},null,8,["class","modelValue"]),Object(n["createVNode"])(W,{name:"Email",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",w,[k,B,Object(n["createVNode"])(J,{type:"tel",class:Object(n["normalizeClass"])(["form-control form-input-bg",{"is-invalid":r["tel"]}]),id:"tel",placeholder:"請輸入手機或家用電話",name:"tel",rules:$.isPhone,modelValue:e.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.user.tel=t})},null,8,["rules","class","modelValue"]),Object(n["createVNode"])(W,{name:"tel",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",C,[S,I,Object(n["createVNode"])(J,{class:Object(n["normalizeClass"])(["form-select form-input-bg",{"is-invalid":r["付款方式"]}]),id:"payment",name:"付款方式",rules:"required",as:"select",modelValue:e.form.user.payment_method,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.user.payment_method=t})},{default:Object(n["withCtx"])((function(){return[R,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.payment,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{value:e,key:t},Object(n["toDisplayString"])(e),9,L)})),128))]})),_:2},1032,["class","modelValue"]),Object(n["createVNode"])(W,{name:"付款方式",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",_,[T,P,Object(n["createVNode"])(J,{type:"text",class:Object(n["normalizeClass"])(["form-control form-input-bg",{"is-invalid":r["地址"]}]),id:"address",placeholder:"請輸入地址",name:"地址",rules:"required",modelValue:e.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.user.address=t})},null,8,["class","modelValue"]),Object(n["createVNode"])(W,{name:"地址",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",A,[Object(n["createElementVNode"])("div",D,[Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{class:"form-control form-input-bg",placeholder:"請輸入您的備註",id:"message",style:{height:"75px"},"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.message=t})},null,512),[[n["vModelText"],e.form.message]]),U])])]),Object(n["createElementVNode"])("div",z,[Object(n["createVNode"])(X,{to:"/carts",class:"btn btn-outline-primary"},{default:Object(n["withCtx"])((function(){return[M]})),_:1}),Object(n["createElementVNode"])("button",{class:"btn btn-primary",type:"submit",disabled:!c.valid}," 確認送出 ",8,F)])]})),_:1},8,["onSubmit"])])])])])])],64)}var q=a("5530"),G=a("1da1"),K=(a("96cf"),a("ac1f"),a("00b4"),a("99af"),a("3a5e")),Y=a("b6b4"),J=a("1915"),W=a("cfb9"),X=a("6c02"),H={components:{Loading:K["a"],ProgressBar:Y["a"]},setup:function(){var e=Object(n["inject"])("Message"),t=Object(n["inject"])("axios"),a=Object(X["d"])(),r=Object(X["e"])(),c=Object(n["reactive"])({form:{user:{name:"",email:"",tel:"",address:"",payment_method:""},message:""},payment:["WebATM","ATM","CVS","Barcode","Credit","ApplePay","GooglePay"],isLoading:!1,done:a.name,carts:{}});function o(){return l.apply(this,arguments)}function l(){return l=Object(G["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart"),c.isLoading=!0,a.prev=2,a.next=5,t.get(n);case 5:r=a.sent,r.data.success&&(c.carts=r.data.data),Object(J["a"])(),c.isLoading=!1,a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](2),e("error","無法取得資料，請再次確認!"),c.isLoading=!1;case 15:case"end":return a.stop()}}),a,null,[[2,11]])}))),l.apply(this,arguments)}function s(e){var t=/^\(?(\d{2})\)?[\s\]?(\d{4})\-?(\d{4})$/ && /^[0-9]{8,10}$/;return!!t.test(e)||"手機或家用電話為必填"}function i(){return d.apply(this,arguments)}function d(){return d=Object(G["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/order"),c.isLoading=!0,a.prev=2,a.next=5,t.post(n,{data:c.form});case 5:o=a.sent,o.data.success?(W["a"].emit("emit-carts"),r.push("/payment/".concat(o.data.orderId))):e("error","".concat(o.data.message)),c.isLoading=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](2),e("error","無法建立訂單，請再次確認!"),c.isLoading=!1;case 14:case"end":return a.stop()}}),a,null,[[2,10]])}))),d.apply(this,arguments)}o();var u=Object(n["toRefs"])(c);return Object(q["a"])(Object(q["a"])({},u),{},{getCarts:o,isPhone:s,createOrder:i})}},Q=a("6b0d"),Z=a.n(Q);const ee=Z()(H,[["render",$]]);t["default"]=ee},cfb9:function(e,t,a){"use strict";var n=function(e){return{all:e=e||new Map,on:function(t,a){var n=e.get(t);n?n.push(a):e.set(t,[a])},off:function(t,a){var n=e.get(t);n&&(a?n.splice(n.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var n=e.get(t);n&&n.slice().map((function(e){e(a)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,a)}))}}},r=n();t["a"]=r},fce3:function(e,t,a){var n=a("d039"),r=a("da84"),c=r.RegExp;e.exports=n((function(){var e=c(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-4c4eb047.fd4578cb.js.map